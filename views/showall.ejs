<%- include('partials/header.ejs') %>

<div class="container mt-5">
  <div class="text-center mb-4">
    <h1 class="display-4">Tentor</h1>
  </div>

  <% if (locals.data) { %>
  <div class="row g-4">
    <% data.forEach((tenta, index) => { %>
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="card h-100 shadow">
        <div class="card-body d-flex flex-column">
          <!-- Course Title -->
          <h5 class="card-title text-primary text-center">
            <%= tenta.course %>
          </h5>

          <!-- Questions List -->
          <% if (tenta.questions && typeof tenta.questions === 'object' &&
          Object.keys(tenta.questions).length > 1) { %>
          <ul class="list-unstyled mt-3">
            <% Object.keys(tenta.questions).forEach((key) => { %>
            <li>
              <i class="bi bi-question-circle"></i> <%= tenta.questions[key] %>
            </li>
            <% }); %>
          </ul>
          <% } else if (tenta.questions && typeof tenta.questions === 'string')
          { %>
          <p class="text-muted mt-3">
            <i class="bi bi-question-circle"></i> <%= tenta.questions %>
          </p>
          <% } else { %>
          <p class="text-muted mt-3">No questions available.</p>
          <% } %>

          <!-- Links -->
          <div class="mt-auto">
            <a
              href="/students/<%= tenta.courseId %>"
              class="btn btn-outline-primary btn-sm w-100 mt-2"
              >View Students</a
            >
            <a
              href="/questions/edit/<%= tenta.courseId %>"
              class="btn btn-outline-secondary btn-sm w-100 mt-2"
              >Edit Questions</a
            >
          </div>
        </div>
      </div>
    </div>
    <% }); %>
  </div>
  <% } else { %>
  <div class="text-center mt-5">
    <p class="text-muted">No data available.</p>
  </div>
  <% } %>
</div>

<%- include('partials/footer.ejs') %>
